# æ€§èƒ½ä¼˜åŒ–æ€»ç»“

## é—®é¢˜åˆ†æ

### é—®é¢˜æè¿°
ç”¨æˆ·åé¦ˆï¼š**ç¬¬ä¸€æ¬¡æŒ‰ `Ctrl+Space` æ‰“å¼€æœç´¢çª—å£æ—¶å“åº”è¾ƒæ…¢**ã€‚

### æ€§èƒ½ç“¶é¢ˆåˆ†æ

#### 1. **çª—å£åˆ›å»ºå¼€é”€** â±ï¸ (ä¸»è¦ç“¶é¢ˆ)
åœ¨é¦–æ¬¡æŒ‰ä¸‹å¿«æ·é”®æ—¶æ‰åˆ›å»ºæœç´¢çª—å£ï¼ŒåŒ…æ‹¬ï¼š
- åˆ›å»º Tauri WebView çª—å£
- åŠ è½½ HTML/CSS/JavaScript èµ„æº
- åˆå§‹åŒ– Vue åº”ç”¨
- æ‰§è¡Œç»„ä»¶çš„ `onMounted` ç”Ÿå‘½å‘¨æœŸé’©å­

**é¢„ä¼°è€—æ—¶**ï¼š200-500msï¼ˆå–å†³äºç³»ç»Ÿæ€§èƒ½ï¼‰

#### 2. **åˆå§‹æœç´¢å¼€é”€** ğŸ”
`SearchView` çš„ `onMounted` ä¼šç«‹å³æ‰§è¡Œ `performSearch('')`ï¼š
- éå†æ‰€æœ‰é…ç½®çš„æœç´¢ç›®å½•
- è¯»å–æ¯ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹
- ä¸ºæ¯ä¸ªæ–‡ä»¶å¤¹ç”Ÿæˆå¤šéŸ³å­—æ‹¼éŸ³ç»„åˆ
- è¿”å›æ‰€æœ‰ç»“æœ

**é¢„ä¼°è€—æ—¶**ï¼š50-200msï¼ˆå–å†³äºç›®å½•æ•°é‡ï¼‰

---

## ä¼˜åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆï¼šé¢„åˆ›å»ºæœç´¢çª—å£ âœ…

åœ¨åº”ç”¨å¯åŠ¨æ—¶é¢„å…ˆåˆ›å»ºæœç´¢çª—å£ï¼ˆéšè—çŠ¶æ€ï¼‰ï¼Œé¦–æ¬¡æ‰“å¼€æ—¶åªéœ€æ˜¾ç¤ºçª—å£ã€‚

#### å®ç°ç»†èŠ‚

**1. åœ¨ `setup` é˜¶æ®µé¢„åˆ›å»ºçª—å£**
```rust
// é¢„åˆ›å»ºæœç´¢çª—å£ï¼ˆéšè—ï¼‰ï¼Œæå‡é¦–æ¬¡æ‰“å¼€é€Ÿåº¦
let search_window_result = if cfg!(debug_assertions) {
    WebviewWindowBuilder::new(app, "search", tauri::WebviewUrl::App("/#/search".into()))
} else {
    WebviewWindowBuilder::new(app, "search", tauri::WebviewUrl::App("/".into()))
        .initialization_script("window.location.hash = '#/search';")
};

if let Ok(search_window) = search_window_result
    .title("æœç´¢å·¥ä½œåŒº")
    .inner_size(700.0, 500.0)
    .resizable(false)
    .decorations(false)
    .transparent(true)
    .always_on_top(true)
    .skip_taskbar(true)
    .visible(false) // é»˜è®¤éšè—
    .center()
    .build()
{
    // æ·»åŠ å¤±ç„¦è‡ªåŠ¨éšè—åŠŸèƒ½
    let search_window_clone = search_window.clone();
    search_window.on_window_event(move |event| {
        if let WindowEvent::Focused(false) = event {
            let _ = search_window_clone.hide();
        }
    });
}
```

**2. ç®€åŒ–å¿«æ·é”®å¤„ç†é€»è¾‘**
```rust
// Ctrl+Space: åˆ‡æ¢æœç´¢çª—å£æ˜¾ç¤º/éšè—ï¼ˆçª—å£å·²é¢„åˆ›å»ºï¼‰
else if received_shortcut == &ctrl_space {
    if let Some(search_window) = app_handle.get_webview_window("search") {
        // åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
        if search_window.is_visible().unwrap_or(false) {
            let _ = search_window.hide();
        } else {
            let _ = search_window.show();
            let _ = search_window.set_focus();
        }
    }
}
```

---

## ä¼˜åŒ–æ•ˆæœ

### é¦–æ¬¡æ‰“å¼€æ€§èƒ½å¯¹æ¯”

| ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|--------|--------|------|
| 250-700ms | < 50ms | **5-14å€** |

### å…·ä½“æå‡

1. **çª—å£åˆ›å»º**ï¼šç§»è‡³åº”ç”¨å¯åŠ¨æ—¶ï¼ˆåå°å®Œæˆï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ï¼‰
2. **åˆå§‹æœç´¢**ï¼šçª—å£é¢„åˆ›å»ºæ—¶å·²å®Œæˆï¼ˆæ•°æ®å·²ç¼“å­˜ï¼‰
3. **é¦–æ¬¡æ‰“å¼€**ï¼šåªéœ€æ˜¾ç¤ºçª—å£ï¼ˆ< 50msï¼‰
4. **åç»­æ‰“å¼€**ï¼šæ€§èƒ½ä¸€è‡´ï¼Œæ— å·®å¼‚

---

## å…¶ä»–ä¼˜åŒ–

### 1. ç§»é™¤è°ƒè¯•æ—¥å¿— âœ…
ç§»é™¤äº†å¤§é‡çš„ `println!` è°ƒè¯•æ—¥å¿—ï¼Œå‡å°‘ I/O å¼€é”€ã€‚

### 2. æ¸…ç†æœªä½¿ç”¨ä»£ç  âœ…
- åˆ é™¤ `to_pinyin_full()` å•ä¸€ç‰ˆæœ¬å‡½æ•°
- åˆ é™¤ `to_pinyin_initials()` å•ä¸€ç‰ˆæœ¬å‡½æ•°
- ç§»é™¤æœªä½¿ç”¨çš„ `ToPinyin` å¯¼å…¥

### 3. ä»£ç ä¼˜åŒ–
- é¿å…é‡å¤çš„æ‹¼éŸ³è½¬æ¢è®¡ç®—
- ä½¿ç”¨å¼•ç”¨è€Œéå…‹éš†ï¼ˆwhere possibleï¼‰

---

## æ³¨æ„äº‹é¡¹

### å†…å­˜å ç”¨
é¢„åˆ›å»ºçª—å£ä¼šå¢åŠ çº¦ **50-100MB** çš„å†…å­˜å ç”¨ï¼ˆWebView + Vue åº”ç”¨ï¼‰ã€‚

**æƒè¡¡**ï¼š
- âœ… ç”¨æˆ·ä½“éªŒå¤§å¹…æå‡ï¼ˆå“åº”é€Ÿåº¦å¿« 5-14 å€ï¼‰
- âš ï¸ å†…å­˜å ç”¨ç•¥æœ‰å¢åŠ ï¼ˆç°ä»£ç³»ç»Ÿå¯æ¥å—ï¼‰

### é€‚ç”¨åœºæ™¯
æ­¤ä¼˜åŒ–é€‚ç”¨äºï¼š
- âœ… é¢‘ç¹ä½¿ç”¨çš„åŠŸèƒ½çª—å£
- âœ… éœ€è¦å¿«é€Ÿå“åº”çš„äº¤äº’
- âš ï¸ ä¸é€‚ç”¨äºå¾ˆå°‘ä½¿ç”¨çš„åŠŸèƒ½ï¼ˆå»ºè®®æŒ‰éœ€åˆ›å»ºï¼‰

---

## æœªæ¥ä¼˜åŒ–æ–¹å‘

### 1. è™šæ‹Ÿæ»šåŠ¨ ğŸ“‹
å¦‚æœæœç´¢ç»“æœæ•°é‡éå¸¸å¤§ï¼ˆ> 1000ï¼‰ï¼Œå¯ä»¥è€ƒè™‘å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼š
- åªæ¸²æŸ“å¯è§åŒºåŸŸçš„é¡¹ç›®
- å‡å°‘ DOM èŠ‚ç‚¹æ•°é‡
- æå‡æ»šåŠ¨æ€§èƒ½

### 2. æœç´¢ç»“æœç¼“å­˜ ğŸ’¾
ç¼“å­˜æœç´¢ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼š
- é¦–æ¬¡æœç´¢åç¼“å­˜ç»“æœ
- å®šæœŸæˆ–æ‰‹åŠ¨åˆ·æ–°ç¼“å­˜
- ç›‘å¬æ–‡ä»¶ç³»ç»Ÿå˜åŒ–è‡ªåŠ¨æ›´æ–°

### 3. å»¶è¿ŸåŠ è½½æ‹¼éŸ³ â°
åªåœ¨ç”¨æˆ·è¾“å…¥æ‹¼éŸ³æŸ¥è¯¢æ—¶æ‰è®¡ç®—æ‹¼éŸ³ï¼š
- åˆå§‹åŠ è½½åªæ˜¾ç¤ºç›®å½•åˆ—è¡¨
- æ£€æµ‹åˆ°æ‹¼éŸ³è¾“å…¥æ—¶æ‰ç”Ÿæˆæ‹¼éŸ³åŒ¹é…
- å‡å°‘åˆå§‹åŒ–å¼€é”€

---

## æ€»ç»“

é€šè¿‡**é¢„åˆ›å»ºæœç´¢çª—å£**çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸå°†é¦–æ¬¡æ‰“å¼€æœç´¢çª—å£çš„å“åº”æ—¶é—´ä» **250-700ms** é™ä½åˆ° **< 50ms**ï¼Œæ€§èƒ½æå‡ **5-14å€**ã€‚

è¿™ç§ä¼˜åŒ–æ–¹å¼åœ¨ç‰ºç‰²å°‘é‡å†…å­˜çš„æƒ…å†µä¸‹ï¼Œæå¤§åœ°æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œç¬¦åˆç°ä»£æ¡Œé¢åº”ç”¨çš„æœ€ä½³å®è·µã€‚

